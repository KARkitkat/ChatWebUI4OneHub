/* ============ ğŸ”„ ä¿®æ”¹ï¼šæ¨¡å‹é€‰æ‹©å™¨ä½ç½®è°ƒæ•´ ============ */
/* ============ ä¿®å¤å¸ƒå±€ä¸ç‚¹å‡»é—®é¢˜ ============ */

.composer-wrap {
  /* ç¡®ä¿å®¹å™¨æœ¬èº«æ˜¯çºµå‘æ’åˆ— */
	display: flex;
	flex-direction: column;
	gap: 10px;
  /* ä¿æŒåŸæœ‰çš„å®šä½ */
	position: fixed;
	bottom: 22px;
  /* âš ï¸ ä¿æŒ pointer-events: none ä»¥ä¾¿é¼ æ ‡èƒ½ç©¿é€ç©ºç™½åŒºåŸŸ */
	pointer-events: none;
}

/* ä¿®å¤è¾“å…¥æ¡†å˜å°ï¼šå¼ºåˆ¶å æ»¡å®¹å™¨å®½åº¦ */
.composer {
	width: 100%;
	pointer-events: auto;
 /* ä¿æŒè¾“å…¥æ¡†å¯ç‚¹ */
}

/* ä¿®å¤æ¨¡æ€æ¡†ç‚¹ä¸äº†ï¼šæ˜¾å¼å¼€å¯ç‚¹å‡»äº‹ä»¶ */
.model-chip {
	pointer-events: auto;
 /* âœ… å…³é”®ä¿®å¤ï¼šå…è®¸ç‚¹å‡» */
	align-self: flex-start;
 /* è®©æŒ‰é’®é å·¦å¯¹é½ï¼Œå¦‚æœå–œæ¬¢å±…ä¸­å¯æ”¹ä¸º center */
	background: #fff;
	z-index: 50;
 /* ä¿è¯å±‚çº§ */
	margin: 0 auto;
}

/* ä¿®å¤ä¸‹æ‹‰èœå•æ–¹å‘ï¼šå‘ä¸Šå¼¹å‡º */
.model-dropdown {
	top: auto !important;
	bottom: 100% !important;
 /* å‘ä¸Šå»¶ä¼¸ */
	margin-bottom: 8px;
      /* ç•™å‡ºé—´è· */
	margin-top: 0 !important;
	box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.1);
 /* è°ƒæ•´é˜´å½±æ–¹å‘ */
}

/* ä¿®å¤é¼ æ ‡æ‚¬åœæ–­å±‚ï¼ˆé€æ˜æ¡¥ï¼‰ */
.model-dropdown::before {
	top: auto;
	bottom: -15px;
 /* å¡«è¡¥æŒ‰é’®å’Œèœå•ä¹‹é—´çš„ç©ºéš™ */
	height: 15px;
}

/* ============ âœ… Markdown æ¸²æŸ“æ ·å¼ï¼ˆä»… assistant æ°”æ³¡ï¼‰ ============ */
.msg-bubble.assistant.markdown-body {
	white-space: normal;
           /* è¦†ç›– pre-wrapï¼Œç»™ HTML æ­£å¸¸æ’ç‰ˆ */
}

.msg-bubble.assistant.markdown-body p {
	margin: 0.6em 0;
}

.msg-bubble.assistant.markdown-body img {
	max-width: 100%;
	border-radius: 6px;
}

.msg-bubble.assistant.markdown-body h1,
.msg-bubble.assistant.markdown-body h2,
.msg-bubble.assistant.markdown-body h3 {
	margin: 0.8em 0 0.4em;
	line-height: 1.25;
}

.msg-bubble.assistant.markdown-body ul,
.msg-bubble.assistant.markdown-body ol {
	padding-left: 1.2em;
	margin: 0.6em 0;
}

.msg-bubble.assistant.markdown-body blockquote {
	margin: 0.8em 0;
	padding: 0.2em 0.8em;
	border-left: 3px solid var(--line);
	color: var(--muted);
}

.msg-bubble.assistant.markdown-body code {
	font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
	font-size: 0.95em;
	padding: 0.15em 0.35em;
	border: 1px solid var(--line);
	border-radius: 8px;
	background: #f8fafc;
}

.msg-bubble.assistant.markdown-body pre {
	overflow: auto;
	padding: 12px 14px;
	border: 1px solid var(--line);
	border-radius: 14px;
	background: #f8fafc;
	color: #0f172a;
	margin: 0.8em 0;
	position: relative;
}

.msg-bubble.assistant.markdown-body pre code {
	border: none;
	padding: 0;
	background: transparent;
	color: inherit;
	white-space: pre;
/* ä»£ç å—è¦ä¿ç•™ç©ºæ ¼ */
}

.msg-bubble.assistant.markdown-body pre code.hljs {
	background: transparent;
}

.msg-bubble.assistant.markdown-body pre .code-copy-btn {
	position: absolute;
	top: 8px;
	right: 8px;
	opacity: 0;
	pointer-events: none;
	z-index: 2;
}

.msg-bubble.assistant.markdown-body pre:hover .code-copy-btn,
.msg-bubble.assistant.markdown-body pre:focus-within .code-copy-btn {
	opacity: 1;
	pointer-events: auto;
}

@media (hover: none) {
	.msg-bubble.assistant.markdown-body pre .code-copy-btn {
		opacity: 1;
		pointer-events: auto;
	}
}

.msg-bubble.assistant.markdown-body table {
	border-collapse: collapse;
	width: 100%;
	margin: 0.8em 0;
	font-size: 14px;
}

.msg-bubble.assistant.markdown-body th,
.msg-bubble.assistant.markdown-body td {
	border: 1px solid var(--line);
	padding: 8px 10px;
	vertical-align: top;
}

.msg-bubble.assistant.markdown-body a {
	color: var(--brand);
	text-decoration: none;
}

.msg-bubble.assistant.markdown-body hr {
	border: 0;
	border-top: 1px solid var(--line);
	margin: 16px 0;
}

.msg-bubble.assistant.markdown-body a:hover {
	text-decoration: underline;
}

/* ============ âœ… é™„ä»¶åˆ—è¡¨ ============ */
.attach-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 8px 4px 0;
}

.attach-list:empty {
  display: none;
  padding: 0;
}

.attach-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  max-width: 100%;
  border: 1px solid var(--line);
  background: #fff;
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  color: var(--text);
}

.attach-thumb {
  width: 24px;
  height: 24px;
  border-radius: 8px;
  object-fit: cover;
  border: 1px solid var(--line);
  background: #f3f4f6;
}

.attach-name {
  max-width: 240px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.attach-remove {
  border: none;
  background: transparent;
  cursor: pointer;
  color: var(--muted);
  font-size: 14px;
  line-height: 1;
  padding: 2px 4px;
  border-radius: 8px;
}

.attach-remove:hover {
  background: #f3f4f6;
  color: #111827;
}

/* ============ æ–‡æœ¬ç¿»è¯‘ / æ–‡æœ¬ä¼˜åŒ–é¢æ¿ï¼ˆä¸ä¿å­˜åˆ°æ•°æ®åº“ï¼‰ ============ */
.main.translate-mode .content,
.main.translate-mode .composer-wrap,
.main.optimize-mode .content,
.main.optimize-mode .composer-wrap {
  display: none !important;
}

.translate-panel {
  display: none;
  flex: 1;
  overflow: auto;
  padding: 24px 18px 32px;
  max-width: var(--content-max);
  margin: 0 auto;
  width: 100%;
}

.main.translate-mode .translate-panel#translatePanel {
  display: block;
}

.main.optimize-mode .optimize-panel {
  display: block;
}

.translate-panel-inner {
  display: flex;
  flex-direction: column;
  gap: 20px;
  min-height: 360px;
}

.translate-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 12px;
}

.translate-title {
  font-size: 22px;
  font-weight: 700;
  margin: 0;
  color: var(--text, #111827);
}

.translate-back {
  padding: 8px 16px;
  border: 1px solid var(--line, #e5e7eb);
  border-radius: 999px;
  background: #fff;
  color: var(--muted, #6b7280);
  font-size: 14px;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}

.translate-back:hover {
  background: #f3f4f6;
  color: #111827;
}

.translate-toolbar {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-end;
  gap: 16px;
  padding: 12px 0;
  border-bottom: 1px solid var(--line, #e5e7eb);
}

.translate-toolbar-row {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* ç¿»è¯‘æ¨¡å‹ï¼šä¸¤ä¸ªä¸‹æ‹‰æ¨ªå‘æ‘†æ”¾ã€å¯¹é½ */
.translate-toolbar-row-model {
  flex-direction: column;
  gap: 6px;
}

.translate-model-selects {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 10px;
}

.translate-model-selects .translate-select {
  flex: 0 0 auto;
}

.translate-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--muted, #6b7280);
}

.translate-select {
  min-width: 120px;
  padding: 8px 12px;
  border: 1px solid var(--line, #e5e7eb);
  border-radius: 10px;
  font-size: 14px;
  background: #fff;
  color: var(--text, #111827);
  cursor: pointer;
}

.translate-select-model {
  min-width: 160px;
}

/* å›ºå®šé«˜åº¦ä¿è¯å·¦å³ä¸¤æ¡†ç­‰é«˜å¯¹é½ */
.translate-body {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr;
  gap: 20px;
  flex: 1;
  height: 320px;
  min-height: 320px;
  align-items: stretch;
}

@media (max-width: 768px) {
  .translate-body {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto;
    height: auto;
    min-height: 400px;
  }
}

/* å·¦åˆ—ï¼šè¾“å…¥æ¡† + ä¸‹æ–¹æŒ‰é’®ç»„ï¼ˆå±…å³ï¼‰ */
.translate-left-col,
.translate-right-col {
  display: flex;
  flex-direction: column;
  min-height: 0;
  gap: 10px;
}

.translate-left-col .translate-input-wrap,
.translate-right-col .translate-output-wrap {
  flex: 1;
  min-height: 0;
  height: auto;
}

.translate-half {
  display: flex;
  flex-direction: column;
  min-height: 0;
  height: 100%;
}

@media (max-width: 768px) {
  .translate-half {
    height: 200px;
    min-height: 200px;
  }
}

/* å·¦å³ä¸¤åˆ—ï¼šå¤–å±‚åŒå°ºå¯¸ï¼Œå†…å±‚ç”¨ç»å¯¹å®šä½å¡«æ»¡ç›¸åŒ insetï¼Œä¿è¯è¾“å…¥æ¡†ä¸è¾“å‡ºæ¡†ä¸Šä¸‹å·¦å³å®Œå…¨å¯¹é½ */
.translate-input-wrap,
.translate-output-wrap {
  position: relative;
  flex: 1;
  min-height: 0;
  height: 100%;
  border: 1px solid var(--line, #e5e7eb);
  border-radius: 14px;
  box-sizing: border-box;
}

.translate-input-wrap {
  background: #fff;
  overflow: hidden;
}

.translate-output-wrap {
  background: #f9fafb;
  overflow: hidden;
}

/* å·¦å³å†…å®¹åŒºå®Œå…¨ç›¸åŒçš„çŸ©å½¢ï¼šè·å››è¾¹ 14px 16pxï¼Œç»å¯¹å®šä½å¡«æ»¡ */
.translate-textarea,
.translate-output {
  position: absolute;
  top: 14px;
  right: 16px;
  bottom: 14px;
  left: 16px;
  width: auto;
  height: auto;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* ç¿»è¯‘è¾“å…¥æ¡†ï¼šè¦†ç›–å…¨å±€ textarea çš„ max-height/min-heightï¼Œå¦åˆ™ä¼šè¢« main.css é™åˆ¶é«˜åº¦ */
.translate-input-wrap .translate-textarea,
#translateInput.translate-textarea {
  border: none;
  border-radius: 0;
  font-size: 15px;
  line-height: 1.6;
  resize: none;
  font-family: inherit;
  background: transparent;
  color: var(--text, #111827);
  display: block;
  min-height: 0 !important;
  max-height: none !important;
  height: auto !important;
}

.translate-textarea::placeholder {
  color: var(--muted, #9ca3af);
}

.translate-textarea:focus {
  outline: none;
  box-shadow: none;
}

.translate-input-wrap:focus-within {
  border-color: var(--brand, #0ea5e9);
  box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.15);
}

.translate-output {
  overflow: auto;
  font-size: 15px;
  line-height: 1.6;
  color: var(--text, #111827);
  white-space: pre-wrap;
  word-break: break-word;
}

.translate-output.placeholder {
  color: var(--muted, #9ca3af);
}

.translate-output.loading {
  color: var(--muted, #6b7280);
}

/* æ–‡æœ¬ä¼˜åŒ–ï¼šæ€è€ƒé˜¶æ®µä»…æ˜¾ç¤ºâ€œæ­£åœ¨æ€è€ƒâ€+ åŠ è½½æ¡ï¼Œä¸å±•ç¤ºæ€è€ƒå†…å®¹ */
.translate-output.optimize-thinking {
  padding: 12px 0;
}
.translate-output.optimize-thinking .optimize-thinking-inner {
  max-width: 320px;
}

/* å·¦ä¾§ä¸‹æ–¹ä¸‰æŒ‰é’®ï¼šè·Ÿéšå·¦è¾¹å¯¹è¯æ¡†ã€å±…å³ */
.translate-actions {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}

.translate-actions .btn {
  padding: 10px 20px;
  border-radius: 999px;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.translate-actions .btn.primary.translate-btn-main {
  padding: 10px 28px;
}

.translate-actions .btn.primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ============ è¯­è¨€é€‰æ‹©å¼¹çª—ï¼ˆæ›´å¤š...ï¼Œè‡ªé€‚åº”åˆ—æ•°ï¼‰ ============ */
.translate-lang-modal {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s, visibility 0.2s;
}

.translate-lang-modal.show {
  opacity: 1;
  visibility: visible;
}

.translate-lang-modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
}

.translate-lang-modal-card {
  position: relative;
  width: min(900px, 96vw);
  max-height: 85vh;
  background: #fff;
  border: 1px solid var(--line, #e5e7eb);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.translate-lang-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--line, #e5e7eb);
  flex-shrink: 0;
}

.translate-lang-modal-title {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--text, #111827);
}

.translate-lang-modal-close {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  font-size: 24px;
  line-height: 1;
  color: var(--muted, #6b7280);
  cursor: pointer;
  border-radius: 8px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s, color 0.2s;
}

.translate-lang-modal-close:hover {
  background: #f3f4f6;
  color: #111827;
}

.translate-lang-modal-search-wrap {
  padding: 0 20px 12px;
  flex-shrink: 0;
}

.translate-lang-modal-search {
  width: 100%;
  padding: 10px 14px 10px 36px;
  border: 1px solid var(--line, #e5e7eb);
  border-radius: 10px;
  font-size: 14px;
  background: #f9fafb url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Ccircle cx='11' cy='11' r='7'/%3E%3Cpath d='M20 20l-3.5-3.5'/%3E%3C/svg%3E") no-repeat 12px center;
  color: var(--text, #111827);
  box-sizing: border-box;
}

.translate-lang-modal-search::placeholder {
  color: var(--muted, #9ca3af);
}

.translate-lang-modal-search:focus {
  outline: none;
  border-color: var(--brand, #0ea5e9);
  background-color: #fff;
}

.translate-lang-modal-body {
  padding: 0 20px 20px;
  overflow: auto;
  flex: 1;
}

/* è‡ªé€‚åº”ç½‘æ ¼ï¼šæ ¹æ®å®¹å™¨å®½åº¦ä¸è®¾å¤‡è‡ªåŠ¨åˆ†åˆ—ï¼Œå…¼é¡¾å¯†åº¦ä¸å¯è¯»æ€§ */
.translate-lang-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 6px 14px;
}

.translate-lang-item {
  display: block;
  width: 100%;
  padding: 6px 10px;
  border: none;
  border-radius: 8px;
  background: transparent;
  color: var(--text, #111827);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: background 0.2s;
}

.translate-lang-item:hover {
  background: #f3f4f6;
}

/* å³ä¾§ä¸‹æ–¹å¤åˆ¶æŒ‰é’®ï¼šå±…å³ */
.translate-output-actions {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  flex-shrink: 0;
}

.translate-output-actions .btn {
  padding: 10px 20px;
  border-radius: 999px;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

/* ============ æ–‡æœ¬ä¼˜åŒ–é¢æ¿ ============ */
.optimize-toolbar {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-end;
  gap: 16px;
  padding: 12px 0;
  border-bottom: 1px solid var(--line, #e5e7eb);
}

.optimize-body {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  flex: 1;
  min-height: 360px;
  align-items: stretch;
}

@media (max-width: 768px) {
  .optimize-body {
    grid-template-columns: 1fr;
  }
}

.optimize-left-col {
  display: flex;
  flex-direction: column;
  gap: 14px;
  min-height: 0;
}

.optimize-right-col {
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 0;
}

.optimize-right-col .optimize-output-wrap {
  flex: 1;
  min-height: 200px;
}

.optimize-block {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.optimize-block-label,
.optimize-config-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--muted, #6b7280);
}

.optimize-config-title {
  margin-bottom: 4px;
}

.optimize-textarea {
  width: 100%;
  min-height: 120px;
  padding: 12px 14px;
  border: 1px solid var(--line, #e5e7eb);
  border-radius: 12px;
  font-size: 14px;
  line-height: 1.6;
  resize: vertical;
  font-family: inherit;
  background: #fff;
  color: var(--text, #111827);
  box-sizing: border-box;
}

.optimize-textarea-small {
  min-height: 72px;
}

.optimize-textarea::placeholder {
  color: var(--muted, #9ca3af);
}

.optimize-config {
  padding: 12px 0;
}

.optimize-config-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.optimize-config-row:last-child {
  margin-bottom: 0;
}

.optimize-config-label {
  flex: 0 0 72px;
  font-size: 13px;
  color: var(--muted, #6b7280);
}

.optimize-config-row .translate-select {
  flex: 1;
  min-width: 0;
}

.optimize-actions {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}

.optimize-actions .btn {
  padding: 10px 20px;
  border-radius: 999px;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}
